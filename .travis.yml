language: objective-c
branches:
  only:
    - v2
sudo: required
os:
  - linux
  - osx
osx_image: xcode7.3
before_install:
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then
      wget http://dl.google.com/android/android-sdk_r23-linux.tgz;
      tar -xzf android-sdk_r23-linux.tgz;
      export ANDROID_HOME=$PROJECT_ROOT/android-sdk-linux;
      export PATH=${PATH}:${ANDROID_HOME}/tools:${ANDROID_HOME}/platform-tools;
      android update sdk --filter platform-tools,android-16,extra-android-support,android-17,sysimg-17 --no-ui --force;
    fi
before_script:
  - npm install -g cordova
script:
  - cordova create testApp
  - git clone https://github.com/ibm-bluemix-mobile-services/bms-clientsdk-cordova-plugin-core ibm-bms-core-clone -b v2
  - cd testApp
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then
      cordova platform add ios;
      cordova plugin add ../ibm-bms-core-clone;
      cordova build ios;
    fi
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then
      cordova platform add android;
      cordova plugin add ../ibm-bms-core-clone;
      cordova build android;
    fi
